From 9d9107569642e5468e34060cf4d0f0aa09a640d4 Mon Sep 17 00:00:00 2001
From: VitalyPolezhay <>
Date: Tue, 19 Sep 2023 13:30:33 +0300
Subject: [PATCH] fixed 18.10

---
 .../SkinCreatorImportViewController.swift                     | 3 ++-
 .../Skin3DCreator/ColorManager3D.swift                        | 2 +-
 .../Extension_Skin3DTestViewController+Gestures.swift         | 2 +-
 .../Skin3DCreator/Skin3DTestViewController.xib                | 4 ++--
 4 files changed, 6 insertions(+), 5 deletions(-)

diff --git a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin2DCreator/BodyPart2DPickerVC/SkinCreatorController/SkinCreatorImportViewController.swift b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin2DCreator/BodyPart2DPickerVC/SkinCreatorController/SkinCreatorImportViewController.swift
index 335394c..31c13aa 100755
--- a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin2DCreator/BodyPart2DPickerVC/SkinCreatorController/SkinCreatorImportViewController.swift	
+++ b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin2DCreator/BodyPart2DPickerVC/SkinCreatorController/SkinCreatorImportViewController.swift	
@@ -143,7 +143,8 @@ final class SkinCreatorImportViewController: UIViewController {
             return
         }
         
-        guard let pixelizedImg = image.pixelateAndResize(to: .init(width: width, height: height)) else { return }
+        guard let rotatedImage = image.rotate(radians: CGFloat.pi/2) else { return }
+        guard let pixelizedImg = rotatedImage.pixelateAndResize(to: .init(width: width, height: height)) else { return }
         
         guard let colorsArr = pixelizedImg.extractPixelColors(width:width, height: height, startX: 0, startY:0) else {
             return
diff --git a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/ColorManager3D.swift b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/ColorManager3D.swift
index 424bc5e..a3652c4 100644
--- a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/ColorManager3D.swift	
+++ b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/ColorManager3D.swift	
@@ -35,7 +35,7 @@ class ColorManager3D {
     
     func updateColorsArr(with color: UIColor) {
 
-        if !colorsArr.contains(color) && color != .clear {
+        if !colorsArr.contains(color) && color != .clear && color.alpha != 0 {
 
             if colorsArr.count == maxColors {
                 colorsArr.removeLast()
diff --git a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Extension_Skin3DTestViewController+Gestures.swift b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Extension_Skin3DTestViewController+Gestures.swift
index 09cdc0d..63a6e4b 100644
--- a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Extension_Skin3DTestViewController+Gestures.swift	
+++ b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Extension_Skin3DTestViewController+Gestures.swift	
@@ -77,7 +77,7 @@ extension Skin3DTestViewController {
                 magnifyingGlassView?.update(with: color ?? UIColor.clear, point: location)
             }
         case .ended, .cancelled:
-            if let peckedColor = magnifyingGlassView?.backgroundColor {
+            if let peckedColor = magnifyingGlassView?.backgroundColor, peckedColor.alpha != 0 {
                 editorSkinModel.addNewColorToPalitrs(peckedColor)
                 editorSkinModel.currentDrawingColor = peckedColor
             }
diff --git a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Skin3DTestViewController.xib b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Skin3DTestViewController.xib
index 07942f3..a057e1e 100755
--- a/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Skin3DTestViewController.xib	
+++ b/Crafty Craft 5/Tab Bar/Create Tab/SkinsCreator/ListOfCreatedSkinsController/Skin3DCreator/Skin3DTestViewController.xib	
@@ -312,7 +312,7 @@
                                                             </connections>
                                                         </button>
                                                         <label opaque="NO" userInteractionEnabled="NO" contentMode="left" horizontalHuggingPriority="251" verticalHuggingPriority="251" text="Colorize" textAlignment="center" lineBreakMode="tailTruncation" baselineAdjustment="alignBaselines" adjustsFontSizeToFit="NO" translatesAutoresizingMaskIntoConstraints="NO" id="3Gh-Yc-jsf">
-                                                            <rect key="frame" x="0.0" y="49" width="61" height="14"/>
+                                                            <rect key="frame" x="0.0" y="49" width="61.333333333333336" height="14"/>
                                                             <fontDescription key="fontDescription" name="Poppins-Medium" family="Poppins Medium" pointSize="10"/>
                                                             <color key="textColor" white="1" alpha="1" colorSpace="custom" customColorSpace="genericGamma22GrayColorSpace"/>
                                                             <nil key="highlightedColor"/>
@@ -488,7 +488,7 @@
                         <action selector="rotationCameraControllButtonAction:" destination="-1" eventType="touchUpInside" id="Ojb-DH-Ab0"/>
                     </connections>
                 </button>
-                <view hidden="YES" contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="MfN-nT-Ult" customClass="SmallModelView" customModule="Crafty_Craft_5" customModuleProvider="target">
+                <view contentMode="scaleToFill" translatesAutoresizingMaskIntoConstraints="NO" id="MfN-nT-Ult" customClass="SmallModelView" customModule="Crafty_Craft_5" customModuleProvider="target">
                     <rect key="frame" x="293.66666666666669" y="590.33333333333337" width="116.33333333333331" height="116.66666666666663"/>
                     <color key="backgroundColor" name="lightGreenBachgroundColor"/>
                     <constraints>
-- 
2.37.0

